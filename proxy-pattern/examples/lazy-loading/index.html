<!doctype html><html lang=en><meta charset=utf-8><meta name=generator content="Hugo 0.70.0"><meta name=viewport content="width=device-width,initial-scale=1,viewport-fit=cover"><meta name=color-scheme content="light dark"><meta name=supported-color-schemes content="light dark"><title>Lazy Loading&nbsp;&ndash;&nbsp;Notes & Cheatsheets</title><link rel=stylesheet href=../../../css/core.min.c248b0a63e69fc1234551d012273899b87baf2edca5d216d0392fd17e6f8f338d0f544da0b4ef46e01d2a3289df4c097.css integrity=sha384-wkiwpj5p/BI0VR0BInOJm4e68u3KXSFtA5L9F+b48zjQ9UTaC070bgHSoyid9MCX><meta name=twitter:card content="summary"><meta name=twitter:title content="Lazy Loading"><body><section id=header><div class="header wrap"><span class="header left-side"><a class="site home" href=../../../><span class="site name">Notes & Cheatsheets</span></a></span>
<span class="header right-side"><div class="nav wrap"><nav class=nav><a class="nav item" href=../../../tags/>Tags</a><a class="nav item" href=../../../about>About</a></nav></div></span></div></section><section id=content><div class=article-container><section class="article header"><h1 class="article title">Lazy Loading</h1><p class="article date">May 13, 2020</p></section><article class="article markdown-body"><blockquote><p><strong>WARNING</strong> the code is a mix between java and pseudocode, and should not be used directly</p></blockquote><p>For this example imagine we have a large amount of data inside a database and we want to get a piece of data inside the database<br>So we have a <code>Database</code> class that reads a database and has <code>String get(String key)</code> method to get the data</p><p><img src=../../../design-patterns/proxy/lazy-loading-01.svg alt="UML Diagram"></p><div class=highlight><pre class=chroma><code class=language-java data-lang=java><span class=kd>interface</span> <span class=nc>IDatabase</span> <span class=o>{</span>
   <span class=n>String</span> <span class=nf>get</span><span class=o>(</span><span class=n>String</span> <span class=n>key</span><span class=o>);</span>
<span class=o>}</span>

<span class=kd>class</span> <span class=nc>Database</span> <span class=kd>implements</span> <span class=n>IDatabase</span> <span class=o>{</span>
   <span class=n>Map</span><span class=o>&lt;</span><span class=n>String</span><span class=o>,</span> <span class=n>String</span><span class=o>&gt;</span> <span class=n>database</span> <span class=o>=</span> <span class=kc>null</span><span class=o>;</span>

   <span class=kd>public</span> <span class=nf>Database</span><span class=o>(</span><span class=n>String</span> <span class=n>path</span><span class=o>)</span> <span class=o>{</span>
      <span class=o>...</span> <span class=c1>// expensive database parsing
</span><span class=c1></span>   <span class=o>}</span>

   <span class=kd>public</span> <span class=n>String</span> <span class=nf>get</span><span class=o>(</span><span class=n>String</span> <span class=n>key</span><span class=o>)</span> <span class=o>{</span>
      <span class=k>return</span> <span class=k>this</span><span class=o>.</span><span class=na>database</span><span class=o>[</span><span class=n>key</span><span class=o>];</span>
   <span class=o>}</span>
<span class=o>}</span>
</code></pre></div><p>But now every time we instantiate <code>Database</code> it&rsquo;s gonna read and parse the database and we may not even use it, this is where proxy comes into play</p><p><img src=../../../design-patterns/proxy/lazy-loading-02.svg alt="UML Diagram"></p><div class=highlight><pre class=chroma><code class=language-java data-lang=java><span class=kd>class</span> <span class=nc>LazyDatabaseProxy</span> <span class=kd>implements</span> <span class=n>IDatabase</span> <span class=o>{</span>
   <span class=n>String</span> <span class=n>path</span> <span class=o>=</span> <span class=kc>null</span><span class=o>;</span>
   <span class=n>Database</span> <span class=n>database</span> <span class=o>=</span> <span class=kc>null</span><span class=o>;</span>
   
   <span class=kd>public</span> <span class=nf>LazyDatabaseProxy</span><span class=o>(</span><span class=n>String</span> <span class=n>path</span><span class=o>)</span> <span class=o>{</span>
      <span class=k>this</span><span class=o>.</span><span class=na>path</span> <span class=o>=</span> <span class=n>path</span><span class=o>;</span>
   <span class=o>}</span>
   
   <span class=kd>private</span> <span class=kt>void</span> <span class=nf>initialize_database</span><span class=o>()</span> <span class=o>{</span>
      <span class=k>if</span> <span class=o>(</span><span class=k>this</span><span class=o>.</span><span class=na>database</span> <span class=o>==</span> <span class=kc>null</span><span class=o>)</span>
         <span class=k>this</span><span class=o>.</span><span class=na>database</span> <span class=o>=</span> <span class=n>Database</span><span class=o>(</span><span class=n>path</span><span class=o>)</span>
   <span class=o>}</span>
   
   <span class=kd>public</span> <span class=n>String</span> <span class=nf>get</span><span class=o>(</span><span class=n>String</span> <span class=n>key</span><span class=o>)</span> <span class=o>{</span>
      <span class=k>this</span><span class=o>.</span><span class=na>initialize_database</span><span class=o>()</span>
      
      <span class=k>return</span> <span class=k>this</span><span class=o>.</span><span class=na>database</span><span class=o>.</span><span class=na>get</span><span class=o>(</span><span class=n>key</span><span class=o>)</span>
   <span class=o>}</span>
<span class=o>}</span>
</code></pre></div><blockquote><p><strong>NOTE</strong> Usually there is gonna be multiple methods that return data thats why <code>initialize_database()</code> would be useful, but with just <code>get()</code> it is redundant</p></blockquote><p>Now every time we try to get data from the database it&rsquo;s gonna be parsed if it wasn&rsquo;t parsed already then return the data, while this may not always be the best approach it can be useful</p></article><section class="article license"><a rel=license href=http://creativecommons.org/licenses/by-nc-sa/4.0/></a>This work is licensed under a <a rel=license href=http://creativecommons.org/licenses/by-nc-sa/4.0/>CC BY 4.0 License</a>.<br>All code is licensed under the <a href=../../../LICENSE-MIT>MIT License</a></section></div><div class="article bottom"><section class="article navigation"><p><a class=link href=../../../template-method-pattern/><span class="iconfont icon-article"></span>Template Method Pattern</a></p><p><a class=link href=../../../bridge-pattern/examples/displaying-fundamentally-different-data/><span class="iconfont icon-article"></span>Displaying Fundamentally Different Data</a></p></section></div></section><section id=footer><div class=footer-wrap><p class=copyright>© 2020 by Aleksandar Radivojević</p><p class=powerby><span>Powered&nbsp;by&nbsp;</span><a href=https://gohugo.io target=_blank>Hugo</a><span>&nbsp;&&nbsp;</span><a href=https://themes.gohugo.io/hugo-notepadium/ target=_blank>Notepadium</a></p></div></section><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css integrity=sha384-zB1R0rpPzHqg7Kpt0Aljp8JPLqbXI3bhnPWROx27a9N0Ll6ZP/+DiW/UqRcLbRjq crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.js integrity=sha384-y23I5Q6l+B6vatafAwxRu/0oK/79VlbSz7Q9aiSZUvyWYIYsd+qj+o24G5ZU2zJz crossorigin=anonymous></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/auto-render.min.js integrity=sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI crossorigin=anonymous onload=renderMathInElement(document.body);></script></body></html>